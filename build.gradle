plugins {
	id 'java'
}

version = '0.0.1'

allprojects {
    apply plugin: 'java'
    sourceCompatibility = 1.8
    targetCompatibility = 1.8
}

repositories {
	jcenter()
	flatDir {
		dirs 'libs'
	}
}

dependencies {
	compile 'org.zeromq:jeromq:0.5.0'
	compile 'com.google.protobuf:protobuf-java:3.7.0'
	compile 'net.corda:corda-rpc:4.0'
	compile 'org.apache.logging.log4j:log4j-slf4j-impl:2.11.2'
	compile 'org.apache.logging.log4j:log4j-web:2.11.2'
	compile 'org.slf4j:jul-to-slf4j:1.7.25'

	
	compile name: 'jgn-workflows-0.1'
	compile name: 'accounts-sdk-flows-1.0-SNAPSHOT'
	compile name: 'accounts-sdk-states-and-contracts-1.0-SNAPSHOT'
	compile name: 'jgn-contract-0.1'
	
	 // Use JUnit test framework
    testImplementation 'junit:junit:4.12'

}

def mainClassName = 'org.jgn.api.App'

task run(type: JavaExec, dependsOn: assemble) {
	classpath = sourceSets.main.runtimeClasspath
	main = mainClassName
}

jar {
	manifest {
		attributes(
			'Main-Class': mainClassName
		)
	}
	from { 
		configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } 
	}
	exclude 'META-INF/*.RSA', 'META-INF/*.SF', 'META-INF/*.DSA'
}
